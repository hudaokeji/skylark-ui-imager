/**
 * skylark-darkroomjs - A version of darkroomjs that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-darkroomjs/
 * @license MIT
 */
!function(t,e){var i=e.define,require=e.require,o="function"==typeof i&&i.amd,n=!o&&"undefined"!=typeof exports;if(!o&&!i){var s={};i=e.define=function(t,e,i){"function"==typeof i?(s[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),o=t.split("/");i.pop();for(var n=0;n<o.length;n++)"."!=o[n]&&(".."==o[n]?i.pop():i.push(o[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):s[t]={factory:null,resolved:!0,exports:i}},require=e.require=function(t){if(!s.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=s[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(e,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-darkroomjs/Darkroom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-widgets-base/Widget","skylark-fabric"],function(t,e,i,o,n,s){"use strict";var a={};function r(t){return{height:Math.abs(t.getScaledWidth()*Math.sin(t.angle*Math.PI/180))+Math.abs(t.getScaledHeight()*Math.cos(t.angle*Math.PI/180)),width:Math.abs(t.getScaledHeight()*Math.sin(t.angle*Math.PI/180))+Math.abs(t.getScaledWidth()*Math.cos(t.angle*Math.PI/180))}}function h(t){this.element=t}function c(t){this.element=t}function l(t){this.element=t}h.prototype={createButtonGroup:function(t){var e=document.createElement("div");return e.className="darkroom-button-group",this.element.appendChild(e),new c(e)}},c.prototype={createButton:function(t){t=e.mixin({},{image:"help",type:"default",group:"default",hide:!1,disabled:!1},t);var i=document.createElement("button");i.type="button",i.className="darkroom-button darkroom-button-"+t.type,i.innerHTML='<svg class="darkroom-icon"><use xlink:href="#'+t.image+'" /></svg>',this.element.appendChild(i);var o=new l(i);return o.hide(t.hide),o.disable(t.disabled),o}},l.prototype={addEventListener:function(t,e){this.element.addEventListener?this.element.addEventListener(t,e):this.element.attachEvent&&this.element.attachEvent("on"+t,e)},removeEventListener:function(t,e){this.element.removeEventListener&&this.element.removeEventListener(t,e)},active:function(t){t?this.element.classList.add("darkroom-button-active"):this.element.classList.remove("darkroom-button-active")},hide:function(t){t?this.element.classList.add("darkroom-button-hidden"):this.element.classList.remove("darkroom-button-hidden")},disable:function(t){this.element.disabled=!!t}};var d=n.inherit({klassName:"Darkroom",_construct:function(t,e,i){"string"==typeof t&&(t=o.find(t)),this._initializeDOM(t),this.overrided(this.containerElement,e),this.plugins={},this._initializeImage(),this._initializePlugins(),this.refresh(function(){this.options.initialize.bind(this).call()}.bind(this))},containerElement:null,canvas:null,image:null,sourceCanvas:null,sourceImage:null,originalImageElement:null,transformations:[],options:{minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,ratio:null,backgroundColor:"#fff",plugins:{},initialize:function(){}},selfDestroy:function(){var t=this.containerElement,e=new Image;e.onload=function(){t.parentNode.replaceChild(e,t)},e.src=this.sourceImage.toDataURL()},addEventListener:function(t,e){var i=this.canvas.getElement();i.addEventListener?i.addEventListener(t,e):i.attachEvent&&i.attachEvent("on"+t,e)},dispatchEvent:function(t){var e=document.createEvent("Event");e.initEvent(t,!0,!0),this.canvas.getElement().dispatchEvent(e)},refresh:function(t){var e=new Image;e.onload=function(){this._replaceCurrentImage(new s.Image(e)),t&&t()}.bind(this),e.src=this.sourceImage.toDataURL()},_replaceCurrentImage:function(t){this.image&&this.image.canvas.remove(this.image),this.image=t,this.image.selectable=!1;var e=r(this.image),i=e.width,o=e.height;if(null!==this.options.ratio){var n=+this.options.ratio,s=i/o;s>n?o=i/n:s<n&&(i=o*n)}var a=1,h=1,c=1;null!==this.options.maxWidth&&this.options.maxWidth<i&&(h=this.options.maxWidth/i),null!==this.options.maxHeight&&this.options.maxHeight<o&&(c=this.options.maxHeight/o),a=Math.min(h,c),h=1,c=1,null!==this.options.minWidth&&this.options.minWidth>i&&(h=this.options.minWidth/i),null!==this.options.minHeight&&this.options.minHeight>o&&(c=this.options.minHeight/o);var l=Math.max(h,c)*a;i*=l,o*=l,this.image.scaleX=1*l,this.image.scaleY=1*l,this.canvas.add(this.image),this.canvas.setWidth(i),this.canvas.setHeight(o),this.canvas.centerObject(this.image),this.image.setCoords()},applyTransformation:function(t){this.transformations.push(t),t.applyTransformation(this.sourceCanvas,this.sourceImage,this._postTransformation.bind(this))},_postTransformation:function(t){t&&(this.sourceImage=t),this.refresh(function(){this.dispatchEvent("core:transformation")}.bind(this))},reinitializeImage:function(){this.canvas.remove(this.sourceImage),this._initializeImage(),this._popTransformation(this.transformations.slice())},_popTransformation:function(t){if(0===t.length)return this.dispatchEvent("core:reinitialized"),void this.refresh();var e=t.shift();e.applyTransformation(this.sourceCanvas,this.sourceImage,function(e){e&&(this.sourceImage=e);this._popTransformation(t)}.bind(this))},_initializeDOM:function(t){var e=document.createElement("div");e.className="darkroom-container";var i=document.createElement("div");i.className="darkroom-toolbar",e.appendChild(i);var o=document.createElement("div");o.className="darkroom-image-container";var n=this.canvasElement=document.createElement("canvas");o.appendChild(n),e.appendChild(o);var s=document.createElement("div");s.className="darkroom-source-container",s.style.display="none";var a=this.sourceCanvasElement=document.createElement("canvas");s.appendChild(a),e.appendChild(s),t.parentNode.replaceChild(e,t),t.style.display="none",e.appendChild(t),this.containerElement=e,this.originalImageElement=t,this.toolbar=new h(i)},_initializeImage:function(){this.canvas=new s.Canvas(this.canvasElement,{selection:!1,backgroundColor:this.options.backgroundColor}),this.sourceCanvas=new s.Canvas(this.sourceCanvasElement,{selection:!1,backgroundColor:this.options.backgroundColor}),this.sourceImage=new s.Image(this.originalImageElement,{selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1}),this.sourceCanvas.add(this.sourceImage);var t=r(this.sourceImage),e=t.width,i=t.height;this.sourceCanvas.setWidth(e),this.sourceCanvas.setHeight(i),this.sourceCanvas.centerObject(this.sourceImage),this.sourceImage.setCoords()},_initializePlugins:function(){for(var t in a){var e=a[t],i=this.options.plugins[t];!1!==i&&(a.hasOwnProperty(t)&&(this.plugins[t]=new e.ctor(this,i)))}}});return d.Plugin=e.Evented.inherit({klassName:"Plugin",defaults:{},init:function(t,i){this.Darkroom=t,this.options=e.mixin({},this.defaults,i)}}),d.Transformation=e.Evented.inherit({klassName:"Transformation",init:function(t){this.options=t}}),d.installPlugin=function(t){a[t.name]=t},t.attach("intg.Darkroom",d)}),t("skylark-darkroomjs/plugins/history",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","skylark-fabric","../Darkroom"],function(t,e,i,o,n){"use strict";var s=n.Plugin.inherit({undoTransformations:null,init:function(t,e){this.overrided(t,e),this.undoTransformations=[],this._initButtons(),this.Darkroom.addEventListener("core:transformation",this._onTranformationApplied.bind(this))},undo:function(){if(0!==this.Darkroom.transformations.length){var t=this.Darkroom.transformations.pop();this.undoTransformations.unshift(t),this.Darkroom.reinitializeImage(),this._updateButtons()}},redo:function(){if(0!==this.undoTransformations.length){var t=this.undoTransformations.shift();this.Darkroom.transformations.push(t),this.Darkroom.reinitializeImage(),this._updateButtons()}},_initButtons:function(){var t=this.Darkroom.toolbar.createButtonGroup();return this.backButton=t.createButton({image:"undo",disabled:!0}),this.forwardButton=t.createButton({image:"redo",disabled:!0}),this.backButton.addEventListener("click",this.undo.bind(this)),this.forwardButton.addEventListener("click",this.redo.bind(this)),this},_updateButtons:function(){this.backButton.disable(0===this.Darkroom.transformations.length),this.forwardButton.disable(0===this.undoTransformations.length)},_onTranformationApplied:function(){this.undoTransformations=[],this._updateButtons()}}),a={name:"history",ctor:s};return n.installPlugin(a),a}),t("skylark-darkroomjs/plugins/crop",["skylark-langx/langx","skylark-domx-noder","skylark-domx-images","skylark-domx-query","skylark-fabric","../Darkroom"],function(t,e,i,o,n,s){"use strict";var a=s.Transformation.inherit({applyTransformation:function(t,e,o){var s=new Image,a=function(t){return{height:Math.abs(t.getScaledWidth()*Math.sin(t.get("angle")*Math.PI/180))+Math.abs(t.getScaledHeight()*Math.cos(t.get("angle")*Math.PI/180)),width:Math.abs(t.getScaledHeight()*Math.sin(t.get("angle")*Math.PI/180))+Math.abs(t.getScaledWidth()*Math.cos(t.get("angle")*Math.PI/180))}}(e),r=a.width,h=a.height,c=this.options.left*r,l=this.options.top*h,d=Math.min(this.options.width*r,r-c),u=Math.min(this.options.height*h,h-l);s.src=t.toDataURL({left:c,top:l,width:d,height:u}),i.loaded(s).then(function(){if(!(r<1||a<1)){var i=new n.Image(s,{selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1}),a=s.width,r=s.height;t.setWidth(a),t.setHeight(r),t.remove(e),t.add(i),o(i)}})}}),r=n.util.createClass(n.Rect,{_render:function(t){this.callSuper("_render",t);t.canvas;var e=this.flipX?-1:1,i=this.flipY?-1:1,o=e/this.scaleX,n=i/this.scaleY;t.scale(o,n),this._renderOverlay(t),void 0!==t.setLineDash?t.setLineDash([7,7]):void 0!==t.mozDash&&(t.mozDash=[7,7]),t.strokeStyle="rgba(0, 0, 0, 0.2)",this._renderBorders(t),this._renderGrid(t),t.lineDashOffset=7,t.strokeStyle="rgba(255, 255, 255, 0.4)",this._renderBorders(t),this._renderGrid(t),t.scale(1/o,1/n)},_renderOverlay:function(t){var e=t.canvas,i=Math.ceil(-this.getScaledWidth()/2-this.left),o=Math.ceil(-this.getScaledWidth()/2),n=Math.ceil(this.getScaledWidth()/2),s=Math.ceil(this.getScaledWidth()/2+(e.width-this.getScaledWidth()-this.left)),a=Math.ceil(-this.getScaledHeight()/2-this.top),r=Math.ceil(-this.getScaledHeight()/2),h=Math.ceil(this.getScaledHeight()/2),c=Math.ceil(this.getScaledHeight()/2+(e.height-this.getScaledHeight()-this.top));t.beginPath(),t.moveTo(i-1,a-1),t.lineTo(s+1,a-1),t.lineTo(s+1,c+1),t.lineTo(i-1,c-1),t.lineTo(i-1,a-1),t.closePath(),t.moveTo(o,r),t.lineTo(o,h),t.lineTo(n,h),t.lineTo(n,r),t.lineTo(o,r),t.closePath(),t.fill()},_renderBorders:function(t){t.beginPath(),t.moveTo(-this.getScaledWidth()/2,-this.getScaledHeight()/2),t.lineTo(this.getScaledWidth()/2,-this.getScaledHeight()/2),t.lineTo(this.getScaledWidth()/2,this.getScaledHeight()/2),t.lineTo(-this.getScaledWidth()/2,this.getScaledHeight()/2),t.lineTo(-this.getScaledWidth()/2,-this.getScaledHeight()/2),t.stroke()},_renderGrid:function(t){t.beginPath(),t.moveTo(-this.getScaledWidth()/2+1/3*this.getScaledWidth(),-this.getScaledHeight()/2),t.lineTo(-this.getScaledWidth()/2+1/3*this.getScaledWidth(),this.getScaledHeight()/2),t.stroke(),t.beginPath(),t.moveTo(-this.getScaledWidth()/2+2/3*this.getScaledWidth(),-this.getScaledHeight()/2),t.lineTo(-this.getScaledWidth()/2+2/3*this.getScaledWidth(),this.getScaledHeight()/2),t.stroke(),t.beginPath(),t.moveTo(-this.getScaledWidth()/2,-this.getScaledHeight()/2+1/3*this.getScaledHeight()),t.lineTo(this.getScaledWidth()/2,-this.getScaledHeight()/2+1/3*this.getScaledHeight()),t.stroke(),t.beginPath(),t.moveTo(-this.getScaledWidth()/2,-this.getScaledHeight()/2+2/3*this.getScaledHeight()),t.lineTo(this.getScaledWidth()/2,-this.getScaledHeight()/2+2/3*this.getScaledHeight()),t.stroke()}}),h=s.Plugin.inherit({startX:null,startY:null,isKeyCroping:!1,isKeyLeft:!1,isKeyUp:!1,defaults:{minHeight:1,minWidth:1,ratio:null,quickCropKey:!1},init:function(t,e){this.overrided(t,e);var i=this.Darkroom.toolbar.createButtonGroup();this.cropButton=i.createButton({image:"crop"}),this.okButton=i.createButton({image:"done",type:"success",hide:!0}),this.cancelButton=i.createButton({image:"close",type:"danger",hide:!0}),this.cropButton.addEventListener("click",this.toggleCrop.bind(this)),this.okButton.addEventListener("click",this.cropCurrentZone.bind(this)),this.cancelButton.addEventListener("click",this.releaseFocus.bind(this)),this.Darkroom.canvas.on("mouse:down",this.onMouseDown.bind(this)),this.Darkroom.canvas.on("mouse:move",this.onMouseMove.bind(this)),this.Darkroom.canvas.on("mouse:up",this.onMouseUp.bind(this)),this.Darkroom.canvas.on("object:moving",this.onObjectMoving.bind(this)),this.Darkroom.canvas.on("object:scaling",this.onObjectScaling.bind(this)),n.util.addListener(document,"keydown",this.onKeyDown.bind(this)),n.util.addListener(document,"keyup",this.onKeyUp.bind(this)),this.Darkroom.addEventListener("core:transformation",this.releaseFocus.bind(this))},onObjectMoving:function(t){if(this.hasFocus()){var e=t.target;if(e===this.cropZone){var i=this.Darkroom.canvas,o=e.left,n=e.top,s=e.getScaledWidth(),a=e.getScaledHeight(),r=i.getWidth()-s,h=i.getHeight()-a;o<0&&e.set("left",0),n<0&&e.set("top",0),o>r&&e.set("left",r),n>h&&e.set("top",h),this.Darkroom.dispatchEvent("crop:update")}}},onObjectScaling:function(t){if(this.hasFocus()){var e=!1,i=t.target;if(i===this.cropZone){var o=this.Darkroom.canvas,n=o.getPointer(t.e),s=(n.x,n.y,i.left),a=i.top,r=i.left+i.getScaledWidth(),h=i.top+i.getScaledHeight();if(null!==this.options.ratio&&(s<0||r>o.getWidth()||a<0||h>o.getHeight())&&(e=!0),s<0||r>o.getWidth()||e){var c=this.lastScaleX||1;i.setScaleX(c)}if(s<0&&i.setLeft(0),a<0||h>o.getHeight()||e){var l=this.lastScaleY||1;i.setScaleY(l)}a<0&&i.setTop(0),i.get("width")<this.options.minWidth&&i.scaleToWidth(this.options.minWidth),i.get("height")<this.options.minHeight&&i.scaleToHeight(this.options.minHeight),this.lastScaleX=i.get("scaleX"),this.lastScaleY=i.get("scaleY"),this.Darkroom.dispatchEvent("crop:update")}}},onMouseDown:function(t){if(this.hasFocus()){var e=this.Darkroom.canvas;e.calcOffset();var i=e.getPointer(t.e),o=i.x,s=i.y,a=new n.Point(o,s),r=e.getActiveObject();r===this.cropZone||this.cropZone.containsPoint(a)||(e.discardActiveObject(),this.cropZone.set("width",0),this.cropZone.set("height",0),this.cropZone.set("scaleX",1),this.cropZone.set("scaleY",1),this.startX=o,this.startY=s)}},onMouseMove:function(t){if(this.isKeyCroping)return this.onMouseMoveKeyCrop(t);if(null!==this.startX&&null!==this.startY){var e=this.Darkroom.canvas,i=e.getPointer(t.e),o=i.x,n=i.y;this._renderCropZone(this.startX,this.startY,o,n)}},onMouseMoveKeyCrop:function(t){var e=this.Darkroom.canvas,i=this.cropZone,o=e.getPointer(t.e),n=o.x,s=o.y;i.left&&i.top||(i.set("top",s),i.set("left",n)),this.isKeyLeft=n<i.left+i.width/2,this.isKeyUp=s<i.top+i.height/2,this._renderCropZone(Math.min(i.left,n),Math.min(i.top,s),Math.max(i.left+i.width,n),Math.max(i.top+i.height,s))},onMouseUp:function(t){if(null!==this.startX&&null!==this.startY){var e=this.Darkroom.canvas;this.cropZone.setCoords(),e.setActiveObject(this.cropZone),e.calcOffset(),this.startX=null,this.startY=null}},onKeyDown:function(t){!1===this.options.quickCropKey||t.keyCode!==this.options.quickCropKey||this.isKeyCroping||(this.isKeyCroping=!0,this.Darkroom.canvas.discardActiveObject(),this.cropZone.set("width",0),this.cropZone.set("height",0),this.cropZone.set("scaleX",1),this.cropZone.set("scaleY",1),this.cropZone.set("top",0),this.cropZone.set("left",0))},onKeyUp:function(t){!1!==this.options.quickCropKey&&t.keyCode===this.options.quickCropKey&&this.isKeyCroping&&(this.isKeyCroping=!1,this.startX=1,this.startY=1,this.onMouseUp())},selectZone:function(t,e,i,o,n){this.hasFocus()||this.requireFocus(),n?this.cropZone.set({left:t,top:e,width:i,height:o}):this._renderCropZone(t,e,t+i,e+o);var s=this.Darkroom.canvas;s.bringToFront(this.cropZone),this.cropZone.setCoords(),s.setActiveObject(this.cropZone),s.calcOffset(),this.Darkroom.dispatchEvent("crop:update")},toggleCrop:function(){this.hasFocus()?this.releaseFocus():this.requireFocus()},cropCurrentZone:function(){if(this.hasFocus()&&!(this.cropZone.width<1&&this.cropZone.height<1)){var t=this.Darkroom.image,e=this.cropZone.get("top")-t.get("top"),i=this.cropZone.get("left")-t.get("left"),o=this.cropZone.get("width"),n=this.cropZone.get("height");e<0&&(n+=e,e=0),i<0&&(o+=i,i=0),this.Darkroom.applyTransformation(new a({top:e/t.getScaledHeight(),left:i/t.getScaledWidth(),width:o/t.getScaledWidth(),height:n/t.getScaledHeight()}))}},hasFocus:function(){return void 0!==this.cropZone},requireFocus:function(){this.cropZone=new r({fill:"transparent",hasBorders:!1,originX:"left",originY:"top",cornerColor:"#444",cornerSize:8,transparentCorners:!1,lockRotation:!0,hasRotatingPoint:!1}),null!==this.options.ratio&&this.cropZone.set("lockUniScaling",!0),this.Darkroom.canvas.add(this.cropZone),this.Darkroom.canvas.defaultCursor="crosshair",this.cropButton.active(!0),this.okButton.hide(!1),this.cancelButton.hide(!1)},releaseFocus:function(){void 0!==this.cropZone&&(this.cropZone.canvas.remove(this.cropZone),this.cropZone=void 0,this.cropButton.active(!1),this.okButton.hide(!0),this.cancelButton.hide(!0),this.Darkroom.canvas.defaultCursor="default",this.Darkroom.dispatchEvent("crop:update"))},_renderCropZone:function(t,e,i,o){var n=this.Darkroom.canvas,s=i>t,a=!s,r=o>e,h=!r,c=Math.min(+this.options.minWidth,n.getWidth()),l=Math.min(+this.options.minHeight,n.getHeight()),d=Math.min(t,i),u=Math.max(t,i),g=Math.min(e,o),m=Math.max(e,o);d=Math.max(0,d),u=Math.min(n.getWidth(),u),g=Math.max(0,g),m=Math.min(n.getHeight(),m),u-d<c&&(s?u=d+c:d=u-c),m-g<l&&(r?m=g+l:g=m-l),d<0&&(u+=Math.abs(d),d=0),u>n.getWidth()&&(d-=u-n.getWidth(),u=n.getWidth()),g<0&&(m+=Math.abs(g),g=0),m>n.getHeight()&&(g-=m-n.getHeight(),m=n.getHeight());var p=u-d,f=m-g,v=p/f;if(this.options.ratio&&+this.options.ratio!==v){var k=+this.options.ratio;if(this.isKeyCroping&&(a=this.isKeyLeft,h=this.isKeyUp),v<k){var y=f*k;a&&(d-=y-p),p=y}else if(v>k){var b=f/(k*f/p);h&&(g-=b-f),f=b}if(d<0&&(d=0),g<0&&(g=0),d+p>n.getWidth()){var y=n.getWidth()-d;f=y*f/p,p=y,h&&(g=e-f)}if(g+f>n.getHeight()){var b=n.getHeight()-g;p=p*b/f,f=b,a&&(d=t-p)}}this.cropZone.left=d,this.cropZone.top=g,this.cropZone.width=p,this.cropZone.height=f,this.Darkroom.canvas.bringToFront(this.cropZone),this.Darkroom.dispatchEvent("crop:update")}}),c={name:"crop",ctor:h};return s.installPlugin(c),c}),t("skylark-darkroomjs/plugins/rotate",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","skylark-fabric","../Darkroom"],function(t,e,i,o,n){"use strict";var s=n.Transformation.inherit({applyTransformation:function(t,e,i){var o,n,s=(e.angle+this.options.angle)%360;e.rotate(s),n=Math.abs(e.getScaledWidth()*Math.sin(s*Math.PI/180))+Math.abs(e.getScaledHeight()*Math.cos(s*Math.PI/180)),o=Math.abs(e.getScaledHeight()*Math.sin(s*Math.PI/180))+Math.abs(e.getScaledWidth()*Math.cos(s*Math.PI/180)),t.setWidth(o),t.setHeight(n),t.centerObject(e),e.setCoords(),t.renderAll(),i()}}),a=n.Plugin.inherit({init:function(t,e){this.overrided(t,e);var i=this.Darkroom.toolbar.createButtonGroup(),o=i.createButton({image:"rotate-left"}),n=i.createButton({image:"rotate-right"});o.addEventListener("click",this.rotateLeft.bind(this)),n.addEventListener("click",this.rotateRight.bind(this))},rotateLeft:function(){this.rotate(-90)},rotateRight:function(){this.rotate(90)},rotate:function(t){this.Darkroom.applyTransformation(new s({angle:t}))}}),r={name:"rotate",ctor:a};return n.installPlugin(r),r}),t("skylark-darkroomjs/plugins/save",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","skylark-fabric","../Darkroom"],function(t,e,i,o,n){"use strict";var s=n.Plugin.inherit({defaults:{callback:function(){this.Darkroom.selfDestroy()}},init:function(t,e){this.overrided(t,e);var i=this.Darkroom.toolbar.createButtonGroup();this.destroyButton=i.createButton({image:"save"}),this.destroyButton.addEventListener("click",this.options.callback.bind(this))}}),a={name:"save",ctor:s};return n.installPlugin(a),a}),t("skylark-darkroomjs/main",["./Darkroom","./plugins/history","./plugins/crop","./plugins/rotate","./plugins/save"],function(t){return t}),t("skylark-darkroomjs",["skylark-darkroomjs/main"],function(t){return t})}(i),!o){var a=require("skylark-langx/skylark");n?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-darkroomjs.js.map
